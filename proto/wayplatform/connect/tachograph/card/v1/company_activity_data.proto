edition = "2023";

package wayplatform.connect.tachograph.card.v1;

import "google/protobuf/timestamp.proto";
import "wayplatform/connect/tachograph/dd/v1/company_activity_type.proto";
import "wayplatform/connect/tachograph/dd/v1/full_card_number.proto";
import "wayplatform/connect/tachograph/dd/v1/vehicle_registration_identification.proto";

// Represents the content of the EF_Company_Activity_Data file.
//
// The file structure is specified in Appendix 2, Section 4.5.1.
//
//     EF Company_Activity_Data
//     └─CompanyActivityData
//
// The data type `CompanyActivityData` is specified in the Data Dictionary, Section 2.46.
//
// ASN.1 Specification:
//
//     CompanyActivityData ::= SEQUENCE {
//         companyPointerNewestRecord INTEGER(0..NoOfCompanyActivityRecords-1),
//         companyActivityRecords SET SIZE(NoOfCompanyActivityRecords) OF
//         companyActivityRecord SEQUENCE {
//             companyActivityType CompanyActivityType,
//             companyActivityTime TimeReal,
//             cardNumberInformation FullCardNumber,
//             vehicleRegistrationInformation VehicleRegistrationIdentification,
//             downloadPeriodBegin TimeReal,
//             downloadPeriodEnd TimeReal
//         }
//     }
message CompanyActivityData {
  // Represents a single company activity record.
  // See Data Dictionary, Section 2.46.
  message Record {
    // The type of the company activity.
    //
    // See Data Dictionary, Section 2.47, `CompanyActivityType`.
    // ASN.1 Specification:
    //
    //     CompanyActivityType ::= INTEGER {
    //         card-downloading(1), VU-downloading(2), VU-lock-in(3), VU-lock-out(4)
    //     }
    wayplatform.connect.tachograph.dd.v1.CompanyActivityType company_activity_type = 1;

    // The date and time of the company activity.
    //
    // See Data Dictionary, Section 2.162, `TimeReal`.
    // ASN.1 Specification:
    //
    //     TimeReal ::= INTEGER (0..2^32-1)
    google.protobuf.Timestamp company_activity_time = 2;

    // The full card number of the card that was downloaded, if applicable.
    //
    // See Data Dictionary, Section 2.73, `FullCardNumber`.
    // ASN.1 Specification:
    //
    //     FullCardNumber ::= SEQUENCE { ... }
    dd.v1.FullCardNumber card_number_information = 3;

    // The vehicle registration of the vehicle downloaded or locked in/out.
    //
    // See Data Dictionary, Section 2.166, `VehicleRegistrationIdentification`.
    // ASN.1 Specification:
    //
    //     VehicleRegistrationIdentification ::= SEQUENCE { ... }
    dd.v1.VehicleRegistrationIdentification vehicle_registration_information = 4;

    // The beginning of the downloaded period from the VU, if applicable.
    //
    // See Data Dictionary, Section 2.162, `TimeReal`.
    // ASN.1 Specification:
    //
    //     TimeReal ::= INTEGER (0..2^32-1)
    google.protobuf.Timestamp download_period_begin = 5;

    // The end of the downloaded period from the VU, if applicable.
    //
    // See Data Dictionary, Section 2.162, `TimeReal`.
    // ASN.1 Specification:
    //
    //     TimeReal ::= INTEGER (0..2^32-1)
    google.protobuf.Timestamp download_period_end = 6;
  }

  // Index of the last updated record.
  // Corresponds to `companyPointerNewestRecord`.
  //
  // See Data Dictionary, Section 2.46.
  // ASN.1 Specification:
  //
  //     INTEGER(0..NoOfCompanyActivityRecords-1)
  int32 newest_record_index = 1;

  // The set of company activity records.
  // Corresponds to `companyActivityRecords`.
  repeated Record records = 2;
}
