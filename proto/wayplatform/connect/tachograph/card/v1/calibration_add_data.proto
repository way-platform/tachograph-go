edition = "2023";

package wayplatform.connect.tachograph.card.v1;

import "google/protobuf/timestamp.proto";
import "wayplatform/connect/tachograph/dd/v1/load_type.proto";
import "wayplatform/connect/tachograph/dd/v1/nation_numeric.proto";
import "wayplatform/connect/tachograph/dd/v1/string_value.proto";

// Represents the content of the EF_Calibration_Add_Data file (Gen2v2).
//
// The file structure is specified in Appendix 2, Section 4.3.2.
//
//     EF Calibration_Add_Data
//     └─WorkshopCardCalibrationAddData
//
// The data type `WorkshopCardCalibrationAddData` is specified in the Data Dictionary, Section 2.234b.
//
// ASN.1 Specification:
//
//     WorkshopCardCalibrationAddData ::= SEQUENCE {
//         calibrationPointerNewestRecord INTEGER(0..NoOfCalibrationRecords-1),
//         workshopCardCalibrationAddDataRecords SET SIZE(NoOfCalibrationRecords) OF WorkshopCardCalibrationAddDataRecord
//     }
message CalibrationAddData {
  // Represents a single additional data record for a calibration.
  //
  // The data type `WorkshopCardCalibrationAddDataRecord` is specified in the Data Dictionary, Section 2.234c.
  //
  // ASN.1 Specification:
  //
  //     WorkshopCardCalibrationAddDataRecord ::= SEQUENCE {
  //         oldTimeValue TimeReal,
  //         vehicleIdentificationNumber VehicleIdentificationNumber,
  //         byDefaultLoadType LoadType,
  //         calibrationCountry NationNumeric,
  //         calibrationCountryTimestamp TimeReal
  //     }
  message Record {
    // The old time value before adjustment.
    //
    // See Data Dictionary, Section 2.162, `TimeReal`.
    // ASN.1 Specification:
    //
    //     TimeReal ::= INTEGER (0..2^32-1)
    google.protobuf.Timestamp old_time = 1;

    // The Vehicle Identification Number (VIN).
    //
    // See Data Dictionary, Section 2.164, `VehicleIdentificationNumber`.
    // ASN.1 Specification:
    //
    //     VehicleIdentificationNumber ::= IA5String(SIZE(17))
    wayplatform.connect.tachograph.dd.v1.StringValue vehicle_identification_number = 2;

    // The default load type.
    //
    // See Data Dictionary, Section 2.90a, `LoadType`.
    // ASN.1 Specification:
    //
    //     LoadType ::= INTEGER {
    //         not-defined(0), passengers(1), goods(2)
    //     } (0..255)
    wayplatform.connect.tachograph.dd.v1.LoadType by_default_load_type = 3;

    // The country where the calibration was performed.
    //
    // See Data Dictionary, Section 2.101, `NationNumeric`.
    // ASN.1 Specification:
    //
    //     NationNumeric ::= INTEGER(0..255)
    wayplatform.connect.tachograph.dd.v1.NationNumeric calibration_country = 4;

    // The timestamp when the calibration country was recorded.
    //
    // See Data Dictionary, Section 2.162, `TimeReal`.
    // ASN.1 Specification:
    //
    //     TimeReal ::= INTEGER (0..2^32-1)
    google.protobuf.Timestamp calibration_country_timestamp = 5;
  }

  // Index of the last updated record.
  // Corresponds to `calibrationPointerNewestRecord`.
  //
  // See Data Dictionary, Section 2.234b.
  // ASN.1 Specification:
  //
  //     INTEGER(0..NoOfCalibrationRecords-1)
  int32 newest_record_index = 1;

  // The set of additional calibration data records.
  // Corresponds to `workshopCardCalibrationAddDataRecords`.
  repeated Record records = 2;
}
