edition = "2023";

package wayplatform.connect.tachograph.card.v1;

import "google/protobuf/timestamp.proto";
import "wayplatform/connect/tachograph/datadictionary/v1/calibration_purpose.proto";

// Represents calibration data from EF_Calibration.
//
// Corresponds to the `WorkshopCardCalibrationData` data type.
// See Data Dictionary, Section 2.235.
message Calibration {
  // Represents a single calibration record.
  //
  // Corresponds to the `WorkshopCardCalibrationRecord` data type.
  // See Data Dictionary, Section 2.236.
  message Record {
    // See Data Dictionary, Section 2.8 for `CalibrationPurpose`.
    datadictionary.v1.CalibrationPurpose calibration_purpose = 1;
    // Populated only when calibration_purpose is CALIBRATION_PURPOSE_UNRECOGNIZED.
    int32 unrecognized_calibration_purpose = 2;

    // See Data Dictionary, Section 2.164 for `VehicleIdentificationNumber`.
    string vehicle_identification_number = 3;

    // See Data Dictionary, Section 2.166.
    string vehicle_registration_nation = 4;
    string vehicle_registration_number = 5;

    // See Data Dictionary, Section 2.239 for `W-VehicleCharacteristicConstant`.
    int32 w_vehicle_characteristic_constant = 6;

    // See Data Dictionary, Section 2.85 for `K-ConstantOfRecordingEquipment`.
    int32 k_constant_of_recording_equipment = 7;

    // See Data Dictionary, Section 2.91 for `L-TyreCircumference`.
    int32 l_tyre_circumference_mm = 8;

    // See Data Dictionary, Section 2.163 for `TyreSize`.
    string tyre_size = 9;

    // See Data Dictionary, Section 2.156 for `SpeedAuthorised`.
    int32 authorised_speed_kmh = 10;

    // Odometer value before calibration. See DD Section 2.113.
    int32 old_odometer_km = 11;

    // Odometer value after calibration. See DD Section 2.113.
    int32 new_odometer_km = 12;

    // Time before calibration. See DD Section 2.162.
    google.protobuf.Timestamp old_time = 13;

    // Time after calibration. See DD Section 2.162.
    google.protobuf.Timestamp new_time = 14;

    // Date of next calibration. See DD Section 2.57.
    google.protobuf.Timestamp next_calibration_date = 15;

    // See Data Dictionary, Section 2.217 for `VuPartNumber`.
    string vu_part_number = 16;

    // See Data Dictionary, Section 2.72 for `ExtendedSerialNumber`.
    string vu_serial_number = 17;

    // See Data Dictionary, Section 2.148 for `SensorSerialNumber`.
    string sensor_serial_number = 18;
  }

  // Total number of calibrations performed with the card.
  int32 calibration_total_count = 1;

  // Index of the last updated record.
  int32 newest_record_index = 2;

  // The set of calibration records.
  repeated Record records = 3;
}
