edition = "2023";

package wayplatform.connect.tachograph.card.v1;

import "wayplatform/connect/tachograph/card/v1/file_structure.proto";

// CardType represents the type of a tachograph card, which determines its specific
// file layout and data access rights as defined in the EU regulations.
//
// See Data Dictionary, Section 2.67, `EquipmentType`.
//
// ASN.1 Specification:
//
//     EquipmentType ::= INTEGER (0..255)
enum CardType {
  // Unspecified card type.
  CARD_TYPE_UNSPECIFIED = 0;

  // A driver card.
  // Corresponds to EquipmentType value 1.
  //
  // See Appendix 2, TCS_150 (Gen1) and TCS_154 (Gen2).
  //
  // Gen1 File Structure (DF_TACHOGRAPH):
  // -------------------------------------------------------------------------------------
  // | File Name                       | FID    | Structure   | Size      | Read AC         | Update AC       |
  // |---------------------------------|--------|-------------|-----------|-----------------|-----------------|
  // | EF Application_Identification   | 0501h  | Transparent | 10 bytes  | ALW             | NEV             |
  // | EF Card_Certificate             | C108h  | Transparent | 194 bytes | ALW             | NEV             |
  // | EF CA_Certificate               | C100h  | Transparent | 194 bytes | ALW             | NEV             |
  // | EF Identification               | 0520h  | Transparent | 143 bytes | SM-R-ENC-MAC-G1 | SM-C-MAC-G1     |
  // | EF Card_Download                | 050Eh  | Transparent | 4 bytes   | SM-R-ENC-MAC-G1 | SM-C-MAC-G1     |
  // | EF Driving_Licence_Info         | 0522h  | Transparent | 91 bytes  | SM-R-ENC-MAC-G1 | SM-C-MAC-G1     |
  // | EF Events_Data                  | 0502h  | Transparent | 864 bytes | SM-R-ENC-MAC-G1 | SM-C-MAC-G1     |
  // | EF Faults_Data                  | 0503h  | Transparent | 576 bytes | SM-R-ENC-MAC-G1 | SM-C-MAC-G1     |
  // | EF Driver_Activity_Data         | 0504h  | Transparent | 5548 bytes| SM-R-ENC-MAC-G1 | SM-C-MAC-G1     |
  // | EF Vehicles_Used                | 0505h  | Transparent | 1764 bytes| SM-R-ENC-MAC-G1 | SM-C-MAC-G1     |
  // | EF Places                       | 0506h  | Transparent | 462 bytes | SM-R-ENC-MAC-G1 | SM-C-MAC-G1     |
  // | EF Current_Usage                | 0507h  | Transparent | 19 bytes  | SM-R-ENC-MAC-G1 | SM-C-MAC-G1     |
  // | EF Control_Activity_Data        | 0508h  | Transparent | 46 bytes  | SM-R-ENC-MAC-G1 | SM-C-MAC-G1     |
  // | EF Specific_Conditions          | 0521h  | Transparent | 56 bytes  | SM-R-ENC-MAC-G1 | SM-C-MAC-G1     |
  // -------------------------------------------------------------------------------------
  DRIVER_CARD = 1 [(file_structure) = {
    type: MF
    files: [
      {
        type: EF
        ef: EF_ICC
      },
      {
        type: EF
        ef: EF_IC
      },
      {
        type: EF
        ef: EF_DIR
      },
      {
        type: EF
        ef: EF_ATR_INFO
        conditional: true
      },
      {
        type: EF
        ef: EF_EXTENDED_LENGTH
        conditional: true
      },
      {
        type: DF
        df: DF_TACHOGRAPH
        files: [
          {
            type: EF
            ef: EF_APPLICATION_IDENTIFICATION
          },
          {
            type: EF
            ef: EF_CARD_CERTIFICATE
          },
          {
            type: EF
            ef: EF_CA_CERTIFICATE
          },
          {
            type: EF
            ef: EF_IDENTIFICATION
          },
          {
            type: EF
            ef: EF_CARD_DOWNLOAD_DRIVER
          },
          {
            type: EF
            ef: EF_DRIVING_LICENCE_INFO
          },
          {
            type: EF
            ef: EF_EVENTS_DATA
          },
          {
            type: EF
            ef: EF_FAULTS_DATA
          },
          {
            type: EF
            ef: EF_DRIVER_ACTIVITY_DATA
          },
          {
            type: EF
            ef: EF_VEHICLES_USED
          },
          {
            type: EF
            ef: EF_PLACES
          },
          {
            type: EF
            ef: EF_CURRENT_USAGE
          },
          {
            type: EF
            ef: EF_CONTROL_ACTIVITY_DATA
          },
          {
            type: EF
            ef: EF_SPECIFIC_CONDITIONS
          }
        ]
      },
      {
        type: DF
        df: DF_TACHOGRAPH_G2
        files: [
          {
            type: EF
            ef: EF_APPLICATION_IDENTIFICATION
          },
          {
            type: EF
            ef: EF_CARD_CERTIFICATE
          },
          {
            type: EF
            ef: EF_CARD_SIGN_CERTIFICATE
          },
          {
            type: EF
            ef: EF_CA_CERTIFICATE
          },
          {
            type: EF
            ef: EF_LINK_CERTIFICATE
          },
          {
            type: EF
            ef: EF_IDENTIFICATION
          },
          {
            type: EF
            ef: EF_CARD_DOWNLOAD_DRIVER
          },
          {
            type: EF
            ef: EF_DRIVING_LICENCE_INFO
          },
          {
            type: EF
            ef: EF_EVENTS_DATA
          },
          {
            type: EF
            ef: EF_FAULTS_DATA
          },
          {
            type: EF
            ef: EF_DRIVER_ACTIVITY_DATA
          },
          {
            type: EF
            ef: EF_VEHICLES_USED
          },
          {
            type: EF
            ef: EF_PLACES
          },
          {
            type: EF
            ef: EF_CURRENT_USAGE
          },
          {
            type: EF
            ef: EF_CONTROL_ACTIVITY_DATA
          },
          {
            type: EF
            ef: EF_SPECIFIC_CONDITIONS
          },
          {
            type: EF
            ef: EF_VEHICLE_UNITS_USED
          },
          {
            type: EF
            ef: EF_COMPANY_ACTIVITY_DATA
          },
          {
            type: EF
            ef: EF_GNSS_PLACES
          },
          {
            type: EF
            ef: EF_APPLICATION_IDENTIFICATION_V2
            conditional: true
          },
          {
            type: EF
            ef: EF_PLACES_AUTHENTICATION
            conditional: true
          },
          {
            type: EF
            ef: EF_GNSS_PLACES_AUTHENTICATION
            conditional: true
          },
          {
            type: EF
            ef: EF_BORDER_CROSSINGS
            conditional: true
          },
          {
            type: EF
            ef: EF_LOAD_UNLOAD_OPERATIONS
            conditional: true
          },
          {
            type: EF
            ef: EF_LOAD_TYPE_ENTRIES
            conditional: true
          },
          {
            type: EF
            ef: EF_VU_CONFIGURATION
            conditional: true
          }
        ]
      }
    ]
  }];

  // A workshop card.
  // Corresponds to EquipmentType value 2.
  WORKSHOP_CARD = 2 [(file_structure) = {
    type: MF
    files: [
      {
        type: EF
        ef: EF_ICC
      },
      {
        type: EF
        ef: EF_IC
      },
      {
        type: EF
        ef: EF_DIR
      },
      {
        type: EF
        ef: EF_ATR_INFO
        conditional: true
      },
      {
        type: EF
        ef: EF_EXTENDED_LENGTH
        conditional: true
      },
      {
        type: DF
        df: DF_TACHOGRAPH
        files: [
          {
            type: EF
            ef: EF_APPLICATION_IDENTIFICATION
          },
          {
            type: EF
            ef: EF_CARD_CERTIFICATE
          },
          {
            type: EF
            ef: EF_CA_CERTIFICATE
          },
          {
            type: EF
            ef: EF_IDENTIFICATION
          },
          {
            type: EF
            ef: EF_CARD_DOWNLOAD_WORKSHOP
          },
          {
            type: EF
            ef: EF_CALIBRATION
          },
          {
            type: EF
            ef: EF_SENSOR_INSTALLATION_DATA
          },
          {
            type: EF
            ef: EF_EVENTS_DATA
          },
          {
            type: EF
            ef: EF_FAULTS_DATA
          },
          {
            type: EF
            ef: EF_DRIVER_ACTIVITY_DATA
          },
          {
            type: EF
            ef: EF_VEHICLES_USED
          },
          {
            type: EF
            ef: EF_PLACES
          },
          {
            type: EF
            ef: EF_CURRENT_USAGE
          },
          {
            type: EF
            ef: EF_CONTROL_ACTIVITY_DATA
          },
          {
            type: EF
            ef: EF_SPECIFIC_CONDITIONS
          }
        ]
      },
      {
        type: DF
        df: DF_TACHOGRAPH_G2
        files: [
          {
            type: EF
            ef: EF_APPLICATION_IDENTIFICATION
          },
          {
            type: EF
            ef: EF_CARD_CERTIFICATE
          },
          {
            type: EF
            ef: EF_CARD_SIGN_CERTIFICATE
          },
          {
            type: EF
            ef: EF_CA_CERTIFICATE
          },
          {
            type: EF
            ef: EF_LINK_CERTIFICATE
          },
          {
            type: EF
            ef: EF_IDENTIFICATION
          },
          {
            type: EF
            ef: EF_CARD_DOWNLOAD_WORKSHOP
          },
          {
            type: EF
            ef: EF_CALIBRATION
          },
          {
            type: EF
            ef: EF_SENSOR_INSTALLATION_DATA
          },
          {
            type: EF
            ef: EF_EVENTS_DATA
          },
          {
            type: EF
            ef: EF_FAULTS_DATA
          },
          {
            type: EF
            ef: EF_DRIVER_ACTIVITY_DATA
          },
          {
            type: EF
            ef: EF_VEHICLES_USED
          },
          {
            type: EF
            ef: EF_PLACES
          },
          {
            type: EF
            ef: EF_CURRENT_USAGE
          },
          {
            type: EF
            ef: EF_CONTROL_ACTIVITY_DATA
          },
          {
            type: EF
            ef: EF_SPECIFIC_CONDITIONS
          },
          {
            type: EF
            ef: EF_VEHICLE_UNITS_USED
          },
          {
            type: EF
            ef: EF_COMPANY_ACTIVITY_DATA
          },
          {
            type: EF
            ef: EF_GNSS_PLACES
          },
          {
            type: EF
            ef: EF_APPLICATION_IDENTIFICATION_V2
            conditional: true
          },
          {
            type: EF
            ef: EF_PLACES_AUTHENTICATION
            conditional: true
          },
          {
            type: EF
            ef: EF_GNSS_PLACES_AUTHENTICATION
            conditional: true
          },
          {
            type: EF
            ef: EF_BORDER_CROSSINGS
            conditional: true
          },
          {
            type: EF
            ef: EF_LOAD_UNLOAD_OPERATIONS
            conditional: true
          },
          {
            type: EF
            ef: EF_LOAD_TYPE_ENTRIES
            conditional: true
          },
          {
            type: EF
            ef: EF_CALIBRATION_ADD_DATA
            conditional: true
          },
          {
            type: EF
            ef: EF_VU_CONFIGURATION
            conditional: true
          }
        ]
      }
    ]
  }];

  // A control card.
  // Corresponds to EquipmentType value 3.
  CONTROL_CARD = 3 [(file_structure) = {
    type: MF
    files: [
      {
        type: EF
        ef: EF_ICC
      },
      {
        type: EF
        ef: EF_IC
      },
      {
        type: EF
        ef: EF_DIR
      },
      {
        type: EF
        ef: EF_ATR_INFO
        conditional: true
      },
      {
        type: EF
        ef: EF_EXTENDED_LENGTH
        conditional: true
      },
      {
        type: DF
        df: DF_TACHOGRAPH
        files: [
          {
            type: EF
            ef: EF_APPLICATION_IDENTIFICATION
          },
          {
            type: EF
            ef: EF_CARD_CERTIFICATE
          },
          {
            type: EF
            ef: EF_CA_CERTIFICATE
          },
          {
            type: EF
            ef: EF_IDENTIFICATION
          },
          {
            type: EF
            ef: EF_CONTROLLER_ACTIVITY_DATA
          }
        ]
      },
      {
        type: DF
        df: DF_TACHOGRAPH_G2
        files: [
          {
            type: EF
            ef: EF_APPLICATION_IDENTIFICATION
          },
          {
            type: EF
            ef: EF_CARD_CERTIFICATE
          },
          {
            type: EF
            ef: EF_CARD_SIGN_CERTIFICATE
          },
          {
            type: EF
            ef: EF_CA_CERTIFICATE
          },
          {
            type: EF
            ef: EF_LINK_CERTIFICATE
          },
          {
            type: EF
            ef: EF_IDENTIFICATION
          },
          {
            type: EF
            ef: EF_CONTROLLER_ACTIVITY_DATA
          },
          {
            type: EF
            ef: EF_APPLICATION_IDENTIFICATION_V2
            conditional: true
          },
          {
            type: EF
            ef: EF_VU_CONFIGURATION
            conditional: true
          }
        ]
      }
    ]
  }];

  // A company card.
  // Corresponds to EquipmentType value 4.
  COMPANY_CARD = 4 [(file_structure) = {
    type: MF
    files: [
      {
        type: EF
        ef: EF_ICC
      },
      {
        type: EF
        ef: EF_IC
      },
      {
        type: EF
        ef: EF_DIR
      },
      {
        type: EF
        ef: EF_ATR_INFO
        conditional: true
      },
      {
        type: EF
        ef: EF_EXTENDED_LENGTH
        conditional: true
      },
      {
        type: DF
        df: DF_TACHOGRAPH
        files: [
          {
            type: EF
            ef: EF_APPLICATION_IDENTIFICATION
          },
          {
            type: EF
            ef: EF_CARD_CERTIFICATE
          },
          {
            type: EF
            ef: EF_CA_CERTIFICATE
          },
          {
            type: EF
            ef: EF_IDENTIFICATION
          },
          {
            type: EF
            ef: EF_COMPANY_ACTIVITY_DATA
          }
        ]
      },
      {
        type: DF
        df: DF_TACHOGRAPH_G2
        files: [
          {
            type: EF
            ef: EF_APPLICATION_IDENTIFICATION
          },
          {
            type: EF
            ef: EF_CARD_CERTIFICATE
          },
          {
            type: EF
            ef: EF_CARD_SIGN_CERTIFICATE
          },
          {
            type: EF
            ef: EF_CA_CERTIFICATE
          },
          {
            type: EF
            ef: EF_LINK_CERTIFICATE
          },
          {
            type: EF
            ef: EF_IDENTIFICATION
          },
          {
            type: EF
            ef: EF_COMPANY_ACTIVITY_DATA
          },
          {
            type: EF
            ef: EF_APPLICATION_IDENTIFICATION_V2
            conditional: true
          },
          {
            type: EF
            ef: EF_VU_CONFIGURATION
            conditional: true
          }
        ]
      }
    ]
  }];

  // A simulated smart card for an external GNSS facility.
  // The numeric value corresponds to EquipmentType 5 (Manufacturing Card),
  // but it is used to represent a GNSS facility (EquipmentType 8).
  GNSS_SIMULATED_CARD = 5 [(file_structure) = {
    type: MF
    files: [
      {
        type: EF
        ef: EF_ICC
      },
      {
        type: DF
        df: DF_GNSS_FACILITY
        files: [
          {
            type: EF
            ef: EF_CARD_CERTIFICATE
          },
          {
            type: EF
            ef: EF_CA_CERTIFICATE
          },
          {
            type: EF
            ef: EF_LINK_CERTIFICATE
          },
          {
            type: EF
            ef: EF_EGF
          },
          {
            type: EF
            ef: EF_VU
          }
        ]
      }
    ]
  }];
}