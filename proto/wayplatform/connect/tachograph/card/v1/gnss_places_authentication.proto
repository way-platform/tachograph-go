edition = "2023";

package wayplatform.connect.tachograph.card.v1;

import "google/protobuf/timestamp.proto";
import "wayplatform/connect/tachograph/dd/v1/position_authentication_status.proto";

// Represents the content of the EF_GNSS_Places_Authentication file, which contains
// authentication statuses for GNSS accumulated driving places.
//
// The file structure is specified in Appendix 2, Section 4.2.2.
//
//     EF GNSS_Places_Authentication
//     └─GNSSAuthAccumulatedDriving
//
// The data type `GNSSAuthAccumulatedDriving` is specified in the Data Dictionary, Section 2.79a.
//
// ASN.1 Definition:
//
//     GNSSAuthAccumulatedDriving ::= SEQUENCE {
//         gnssAuthADPointerNewestRecord INTEGER(0..NoOfGNSSADRecords -1),
//         gnssAuthStatusADRecords SET SIZE(NoOfGNSSADRecords) OF GNSSAuthStatusADRecord
//     }
message GnssPlacesAuthentication {
  // Represents the authentication status for a single GNSS record.
  //
  // The data type `GNSSAuthStatusADRecord` is specified in the Data Dictionary, Section 2.79b.
  //
  // ASN.1 Definition:
  //
  //     GNSSAuthStatusADRecord ::= SEQUENCE {
  //         timeStamp TimeReal,
  //         authenticationStatus PositionAuthenticationStatus
  //     }
  message Record {
    // Timestamp of the position fix.
    //
    // See Data Dictionary, Section 2.162, `TimeReal`.
    // ASN.1 Definition:
    //
    //     TimeReal ::= INTEGER (0..2^32-1)
    google.protobuf.Timestamp timestamp = 1;

    // Authentication status of the position.
    //
    // See Data Dictionary, Section 2.117a.
    //
    // ASN.1 Definition:
    //
    //     PositionAuthenticationStatus ::= OCTET STRING (SIZE(1))
    //
    // Value assignment:
    //
    //     '00'H: Not Authenticated
    //     '01'H: Authenticated
    //     '02'H-'FF'H: RFU
    wayplatform.connect.tachograph.dd.v1.PositionAuthenticationStatus authentication_status = 2;
  }

  // Index of the last updated record.
  // Corresponds to `gnssAuthADPointerNewestRecord`.
  //
  // See Data Dictionary, Section 2.79a.
  // ASN.1 Definition:
  //
  //     INTEGER(0..NoOfGNSSADRecords -1)
  int32 newest_record_index = 1;

  // The set of GNSS place authentication status records.
  // Corresponds to `gnssAuthStatusADRecords`.
  repeated Record records = 2;
}
