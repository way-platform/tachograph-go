edition = "2023";

package wayplatform.connect.tachograph.card.v1;

import "wayplatform/connect/tachograph/datadictionary/v1/string_value.proto";
import "google/protobuf/timestamp.proto";
import "wayplatform/connect/tachograph/card/v1/card_type.proto";

// Represents the content of the EF_Identification file, which contains identification
// data for the card and its holder.
//
// The file structure is specified in Appendix 2, Sections 4.2.1, 4.3.1, 4.4.1, and 4.5.1.
//
//     EF Identification
//     ├─CardIdentification
//     └─[Driver|Workshop|Control|Company]CardHolderIdentification
//
// The top-level structure varies by card type, but is a sequence of the two main data types.
message Identification {
  // Represents card identification data, common to all card types.
  //
  // The data type `CardIdentification` is specified in the Data Dictionary, Section 2.24.
  //
  // ASN.1 Specification:
  //
  //     CardIdentification ::= SEQUENCE {
  //         cardIssuingMemberState NationNumeric,
  //         cardNumber CardNumber,
  //         cardIssuingAuthorityName Name,
  //         cardIssueDate TimeReal,
  //         cardValidityBegin TimeReal,
  //         cardExpiryDate TimeReal
  //     }
  message Card {
    // The issuing member state of the card.
    //
    // See Data Dictionary, Section 2.24, `cardIssuingMemberState`.
    // ASN.1 Specification: NationNumeric ::= INTEGER (0..255)
    string card_issuing_member_state = 1;
    // The card number.
    //
    // See Data Dictionary, Section 2.24, `cardNumber`.
    // ASN.1 Specification: CardNumber ::= CHOICE { ... } (see DD 2.26 for the full structure)
    // This proto field holds a string representation of the card number.
    string card_number = 2;
    // The name of the authority that issued the card.
    //
    // See Data Dictionary, Section 2.24, `cardIssuingAuthorityName`.
    // ASN.1 Specification: Name ::= SEQUENCE { codePage INTEGER(0..255), name OCTET STRING (SIZE(36)) }
    wayplatform.connect.tachograph.datadictionary.v1.StringValue card_issuing_authority_name = 3;
    // The date the card was issued.
    //
    // See Data Dictionary, Section 2.24, `cardIssueDate`.
    // ASN.1 Specification: TimeReal ::= INTEGER (0..2^32-1)
    google.protobuf.Timestamp card_issue_date = 4;
    // The date from which the card is valid.
    //
    // See Data Dictionary, Section 2.24, `cardValidityBegin`.
    // ASN.1 Specification: TimeReal ::= INTEGER (0..2^32-1)
    google.protobuf.Timestamp card_validity_begin = 5;
    // The date on which the card expires.
    //
    // See Data Dictionary, Section 2.24, `cardExpiryDate`.
    // ASN.1 Specification: TimeReal ::= INTEGER (0..2^32-1)
    google.protobuf.Timestamp card_expiry_date = 6;
  }

  // Represents the identification of the driver card holder.
  //
  // The data type `DriverCardHolderIdentification` is specified in the Data Dictionary, Section 2.62.
  //
  // ASN.1 Specification:
  //
  //     DriverCardHolderIdentification ::= SEQUENCE {
  //         cardHolderName HolderName,
  //         cardHolderBirthDate Datef,
  //         cardHolderPreferredLanguage Language
  //     }
  message DriverCardHolder {
    // The surname of the card holder.
    //
    // Corresponds to `holderSurname` within `HolderName` (DD 2.83).
    // ASN.1 Specification: Name ::= SEQUENCE { codePage INTEGER(0..255), name OCTET STRING (SIZE(36)) }
    wayplatform.connect.tachograph.datadictionary.v1.StringValue card_holder_surname = 1;
    // The first name(s) of the card holder.
    //
    // Corresponds to `holderFirstNames` within `HolderName` (DD 2.83).
    // ASN.1 Specification: Name ::= SEQUENCE { codePage INTEGER(0..255), name OCTET STRING (SIZE(36)) }
    wayplatform.connect.tachograph.datadictionary.v1.StringValue card_holder_first_names = 2;
    // The birth date of the card holder.
    //
    // See Data Dictionary, Section 2.62, `cardHolderBirthDate`.
    // ASN.1 Specification: Datef ::= OCTET STRING (SIZE(4))
    google.protobuf.Timestamp card_holder_birth_date = 3;
    // The preferred language of the card holder.
    //
    // See Data Dictionary, Section 2.62, `cardHolderPreferredLanguage`.
    //
    // ASN.1 Definition:
    //
    //     Language ::= IA5String (SIZE(2))
    wayplatform.connect.tachograph.datadictionary.v1.StringValue card_holder_preferred_language = 4;
  }

  // Represents the identification of the workshop card holder.
  //
  // The data type `WorkshopCardHolderIdentification` is specified in the Data Dictionary, Section 2.237.
  //
  // ASN.1 Specification:
  //
  //     WorkshopCardHolderIdentification ::= SEQUENCE {
  //         workshopName Name,
  //         workshopAddress Address,
  //         cardHolderName HolderName,
  //         cardHolderPreferredLanguage Language
  //     }
  message WorkshopCardHolder {
    // The name of the workshop.
    //
    // See Data Dictionary, Section 2.237, `workshopName`.
    // ASN.1 Specification: Name ::= SEQUENCE { codePage INTEGER(0..255), name OCTET STRING (SIZE(36)) }
    wayplatform.connect.tachograph.datadictionary.v1.StringValue workshop_name = 1;
    // The address of the workshop.
    //
    // See Data Dictionary, Section 2.237, `workshopAddress`.
    // ASN.1 Specification: Address ::= SEQUENCE { codePage INTEGER(0..255), address OCTET STRING (SIZE(36)) }
    wayplatform.connect.tachograph.datadictionary.v1.StringValue workshop_address = 2;
    // The surname of the card holder.
    //
    // Corresponds to `holderSurname` within `HolderName` (DD 2.83).
    // ASN.1 Specification: Name ::= SEQUENCE { codePage INTEGER(0..255), name OCTET STRING (SIZE(36)) }
    wayplatform.connect.tachograph.datadictionary.v1.StringValue card_holder_surname = 3;
    // The first name(s) of the card holder.
    //
    // Corresponds to `holderFirstNames` within `HolderName` (DD 2.83).
    // ASN.1 Specification: Name ::= SEQUENCE { codePage INTEGER(0..255), name OCTET STRING (SIZE(36)) }
    wayplatform.connect.tachograph.datadictionary.v1.StringValue card_holder_first_names = 4;
    // The preferred language of the card holder.
    //
    // See Data Dictionary, Section 2.237, `cardHolderPreferredLanguage`.
    //
    // ASN.1 Definition:
    //
    //     Language ::= IA5String (SIZE(2))
    wayplatform.connect.tachograph.datadictionary.v1.StringValue card_holder_preferred_language = 5;
  }

  // Represents the identification of the control card holder.
  //
  // The data type `ControlCardHolderIdentification` is specified in the Data Dictionary, Section 2.52.
  //
  // ASN.1 Specification:
  //
  //     ControlCardHolderIdentification ::= SEQUENCE {
  //         controlBodyName Name,
  //         controlBodyAddress Address,
  //         cardHolderName HolderName,
  //         cardHolderPreferredLanguage Language
  //     }
  message ControlCardHolder {
    // The name of the control body.
    //
    // See Data Dictionary, Section 2.52, `controlBodyName`.
    // ASN.1 Specification: Name ::= SEQUENCE { codePage INTEGER(0..255), name OCTET STRING (SIZE(36)) }
    wayplatform.connect.tachograph.datadictionary.v1.StringValue control_body_name = 1;
    // The address of the control body.
    //
    // See Data Dictionary, Section 2.52, `controlBodyAddress`.
    // ASN.1 Specification: Address ::= SEQUENCE { codePage INTEGER(0..255), address OCTET STRING (SIZE(36)) }
    wayplatform.connect.tachograph.datadictionary.v1.StringValue control_body_address = 2;
    // The surname of the card holder.
    //
    // Corresponds to `holderSurname` within `HolderName` (DD 2.83).
    // ASN.1 Specification: Name ::= SEQUENCE { codePage INTEGER(0..255), name OCTET STRING (SIZE(36)) }
    wayplatform.connect.tachograph.datadictionary.v1.StringValue card_holder_surname = 3;
    // The first name(s) of the card holder.
    //
    // Corresponds to `holderFirstNames` within `HolderName` (DD 2.83).
    // ASN.1 Specification: Name ::= SEQUENCE { codePage INTEGER(0..255), name OCTET STRING (SIZE(36)) }
    wayplatform.connect.tachograph.datadictionary.v1.StringValue card_holder_first_names = 4;
    // The preferred language of the card holder.
    //
    // See Data Dictionary, Section 2.52, `cardHolderPreferredLanguage`.
    //
    // ASN.1 Definition:
    //
    //     Language ::= IA5String (SIZE(2))
    wayplatform.connect.tachograph.datadictionary.v1.StringValue card_holder_preferred_language = 5;
  }

  // Represents the identification of the company card holder.
  //
  // The data type `CompanyCardHolderIdentification` is specified in the Data Dictionary, Section 2.49.
  //
  // ASN.1 Specification:
  //
  //     CompanyCardHolderIdentification ::= SEQUENCE {
  //         companyName Name,
  //         companyAddress Address,
  //         cardHolderPreferredLanguage Language
  //     }
  message CompanyCardHolder {
    // The name of the company.
    //
    // See Data Dictionary, Section 2.49, `companyName`.
    // ASN.1 Specification: Name ::= SEQUENCE { codePage INTEGER(0..255), name OCTET STRING (SIZE(36)) }
    wayplatform.connect.tachograph.datadictionary.v1.StringValue company_name = 1;
    // The address of the company.
    //
    // See Data Dictionary, Section 2.49, `companyAddress`.
    // ASN.1 Specification: Address ::= SEQUENCE { codePage INTEGER(0..255), address OCTET STRING (SIZE(36)) }
    wayplatform.connect.tachograph.datadictionary.v1.StringValue company_address = 2;
    // The preferred language of the card holder.
    //
    // See Data Dictionary, Section 2.49, `cardHolderPreferredLanguage`.
    //
    // ASN.1 Definition:
    //
    //     Language ::= IA5String (SIZE(2))
    wayplatform.connect.tachograph.datadictionary.v1.StringValue card_holder_preferred_language = 3;
  }

  // The common card identification part.
  Card card = 1;

  // The type of card this identification belongs to. This determines which
  // of the following holder identification fields is populated.
  CardType card_type = 2;

  // Holder identification for a driver card.
  // Populated only if card_type is DRIVER_CARD.
  DriverCardHolder driver_card_holder = 3;

  // Holder identification for a workshop card.
  // Populated only if card_type is WORKSHOP_CARD.
  WorkshopCardHolder workshop_card_holder = 4;

  // Holder identification for a control card.
  // Populated only if card_type is CONTROL_CARD.
  ControlCardHolder control_card_holder = 5;

  // Holder identification for a company card.
  // Populated only if card_type is COMPANY_CARD.
  CompanyCardHolder company_card_holder = 6;

  // Digital signature for the EF_Identification file content.
  //
  // See Data Dictionary, Section 2.149, `Signature`.
  // ASN.1 Specification: Signature ::= OCTET STRING (SIZE(128 for Gen1))
  bytes signature = 7;
}