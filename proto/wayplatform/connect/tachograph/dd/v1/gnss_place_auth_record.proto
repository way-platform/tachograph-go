edition = "2023";

package wayplatform.connect.tachograph.dd.v1;

import "google/protobuf/timestamp.proto";
import "wayplatform/connect/tachograph/dd/v1/geo_coordinates.proto";
import "wayplatform/connect/tachograph/dd/v1/position_authentication_status.proto";

// Represents a GNSS position with authentication status.
//
// This is an extension of GNSSPlaceRecord introduced in Generation 2, Version 2
// that adds position authentication information for tamper detection.
//
// Binary Layout: 12 bytes total
//   - timeStamp: 4 bytes
//   - gnssAccuracy: 1 byte
//   - geoCoordinates: 6 bytes (3 bytes latitude + 3 bytes longitude)
//   - authenticationStatus: 1 byte
//
// See Data Dictionary, Section 2.79c, `GNSSPlaceAuthRecord`.
//
// ASN.1 Definition:
//
//     GNSSPlaceAuthRecord ::= SEQUENCE {
//         timeStamp TimeReal,
//         gnssAccuracy GNSSAccuracy,
//         geoCoordinates GeoCoordinates,
//         authenticationStatus PositionAuthenticationStatus
//     }
message GNSSPlaceAuthRecord {
  // The timestamp when the GNSS position was recorded.
  //
  // See Data Dictionary, Section 2.162, `TimeReal`.
  google.protobuf.Timestamp timestamp = 1;

  // The accuracy of the GNSS fix.
  //
  // See Data Dictionary, Section 2.77, `GNSSAccuracy`.
  // ASN.1 Definition:
  //
  //     GNSSAccuracy ::= INTEGER (1..100)
  int32 gnss_accuracy = 2;

  // The geographic coordinates of the position.
  //
  // See Data Dictionary, Section 2.76, `GeoCoordinates`.
  GeoCoordinates geo_coordinates = 3;

  // The authentication status of the GNSS position.
  //
  // See Data Dictionary, Section 2.117a, `PositionAuthenticationStatus`.
  PositionAuthenticationStatus authentication_status = 4;

  // Preserved raw protocol value when authentication_status is UNRECOGNIZED.
  int32 unrecognized_authentication_status = 5;
}
