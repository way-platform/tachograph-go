edition = "2023";

package wayplatform.connect.tachograph.dd.v1;

// Represents the activities carried out during a control, decoded from a bitmask.
//
// This message preserves the original raw byte for round-trip data fidelity
// while also providing convenient boolean fields for ease of use by consumers.
//
// See Data Dictionary, Section 2.53.
//
// ASN.1 Definition:
//
//     ControlType ::= OCTET STRING (SIZE(1))
//
// The byte is a bitmask with the following structure: 'cvpdexxx'B
// - 'c': card downloading
// - 'v': VU downloading
// - 'p': printing
// - 'd': display
// - 'e': roadside calibration checking (Gen2+)
// - 'xxx': RFU
message ControlType {
  // The raw, original byte representing the bitmask. This field is the source
  // of truth and should be used for any serialization operations to ensure
  // perfect data fidelity, including the preservation of reserved bits.
  bytes raw_data = 6;

  // Indicates if the card was downloaded during the control (bit 'c').
  // This is a convenience field derived from `raw_data`.
  bool card_downloading = 1;

  // Indicates if the VU was downloaded during the control (bit 'v').
  // This is a convenience field derived from `raw_data`.
  bool vu_downloading = 2;

  // Indicates if a printout was made during the control (bit 'p').
  // This is a convenience field derived from `raw_data`.
  bool printing = 3;

  // Indicates if the display was used during the control (bit 'd').
  // This is a convenience field derived from `raw_data`.
  bool display = 4;

  // Indicates if calibration parameters were checked (Gen2+ only) (bit 'e').
  // This is a convenience field derived from `raw_data`.
  bool calibration_checking = 5;
}
